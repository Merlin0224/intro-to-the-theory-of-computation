
#### 关于上下文无关语言的泵引理

**定理 2.19** (关于上下文无关语言的泵引理) 如果$A$是上下文无关语言，则存在数$p$(泵长度)，使得$A$中任何一个长度不小于$p$的字符串$s$都能被划分为5段$s=uvxyz$且满足下述条件：
$1.$对于每一个$i \geq 0$，$uv^ixy^iz \in A$;
$2.$$|vy| > 0$;
$3.$$|vxy| \leq p$.

**证明** 设$G$是关于$CFL \ A$的一个$CFG$，令$b$是规则右边符号数的最大值（假设大于等于2）。在$G$任一棵语法分析树中，一个结点最多有$b$个儿子；离起始变元不超过$h$步最多有$b^h$片树叶。因此，如果语法分析树的高度不超过$h$，则它产生的字符串的长度不超过$b^h$。反之，如果一个产生的字符串长度不小于$b^h + 1$，则生成它的每个语法树高度至少为$h+1$。

设$G$中变元的数目$|V|$。令泵长度为$p  = b ^{|V| + 1}$，则$A$中任一长度不小于$p$的字符串$s$的语法分析树的高度不小于$|V| + 1$，这是因为$b^{|V| + 1} \geq b^{|V|} + 1$。
为说明如何抽取$s$，设$\tau$是$s$的一棵语法分析树，如果$s$有若干语法分析树，取$\tau$是结点数最少的语法分析树，由于$\tau$的高度不小于$|V| + 1$，从而从根节点出发的最长路径的长度不小于$|V| +1$并包含$|V| + 2$个结点，其中一个结点为终结符，其他为变元。因此该路径至少有$|V|+1$个变元，因为只有树叶是终结符，故这条最长的路径上至少有$|V| + 1$个变元，而$G$只有$|V|$个变元，故有某个变元$R$在这条路径上不知出现一次。为了后面的方便，选取$R$为这条路上在最下面的$|V|+1$个变元中重复出现的变元。

按照图2-16把$s$划分为$uvxyz$。在每一个$R$的下面有一棵子树，它产生$s$的一部分。上面的$R$有一棵较大的子树，产生$vxy$；下面的$R$有一棵较小的子树，恰好产生$x$。这两棵树有同一个变元产生，因而可以相互替换，并且仍得到一棵有效的语法分析树，用较小的子树替换较大的子树以产生字符串$uxz$。这就证实了引理中的条件1，下面转到条件2和条件3.

为了得到条件2，必须保证$v$或$y$不都是$\varepsilon$。如果它们都是$\varepsilon$，则用较小的子树替换较大的子树得到的语法分析树的结点比$\tau$少，并且仍然能够产生$s$。但这是不可能的，因为已经选取$\tau$为$s$的结点数最少的语法分析树。

为了得到条件3，必须保证$vxy$的长度不超过$p$，在$s$的语法分析树中，上面的$R$产生$vxy$，选取$R$使得它的两次出现都落在所在路径的最下面的$|V|+1$个变元中，而这条路径又选取的是语法分析树中的最长的路径，因此$R$产生$vxy$的子树的高度不超过$|V|+1$。这么高的树只能产生长度不超过$b^{|V|+1} = p$的字符串。

